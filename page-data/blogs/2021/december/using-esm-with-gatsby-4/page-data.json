{
    "componentChunkName": "component---src-templates-information-page-tsx",
    "path": "/blogs/2021/december/using-esm-with-gatsby-4/",
    "result": {"data":{"mdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar frontmatter = {\n  type: \"blog\",\n  tag: \"using-esm-with-gatsby-4\",\n  date: \"2021-12-19 13:09\",\n  title: \"การใช้ ES-Module กับ Gastby 4 และ Yarn 2\",\n  authors: [\"myself\"],\n  excerpt: \"Workaround สำหรับการใช้ ES-Module กับ Gastby 4 และ Yarn 2\",\n  background: \"gatsby.png\"\n};\nvar _frontmatter = {};\nvar layoutProps = {\n  frontmatter: frontmatter,\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"ปัญหา\"\n  }, \"\\u0E1B\\u0E31\\u0E0D\\u0E2B\\u0E32\"), mdx(\"p\", null, \"\\u0E40\\u0E19\\u0E37\\u0E48\\u0E2D\\u0E07\\u0E08\\u0E32\\u0E01 Gatsby \\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E23\\u0E2D\\u0E07\\u0E23\\u0E31\\u0E1A Plug-in \\u0E17\\u0E35\\u0E48\\u0E40\\u0E1B\\u0E47\\u0E19 ES-Module \\u0E14\\u0E31\\u0E07\\u0E19\\u0E31\\u0E49\\u0E19 Plug-in \\u0E42\\u0E14\\u0E22\\u0E40\\u0E09\\u0E1E\\u0E32\\u0E30\\u0E1E\\u0E27\\u0E01 Remark / Rehype plugins \\u0E08\\u0E30\\u0E21\\u0E35\\u0E1B\\u0E31\\u0E0D\\u0E2B\\u0E32 \\u0E44\\u0E21\\u0E48\\u0E2A\\u0E32\\u0E21\\u0E32\\u0E23\\u0E16\\u0E43\\u0E0A\\u0E49\\u0E44\\u0E14\\u0E49\"), mdx(\"h1\", {\n    \"id\": \"วิธีการแก้ไข้\"\n  }, \"\\u0E27\\u0E34\\u0E18\\u0E35\\u0E01\\u0E32\\u0E23\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E49\"), mdx(\"h2\", {\n    \"id\": \"แก้ไข-yarnrcyml\"\n  }, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02 .yarnrc.yml\"), mdx(\"p\", null, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02 .yarnrc.yml \\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E1B\\u0E34\\u0E14 Plug-and-Play (PnP) \\u0E40\\u0E19\\u0E37\\u0E48\\u0E2D\\u0E07\\u0E08\\u0E32\\u0E01 ES-Module (ESM) \\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E23\\u0E2D\\u0E07\\u0E23\\u0E31\\u0E1A\\u0E1F\\u0E35\\u0E40\\u0E08\\u0E2D\\u0E23\\u0E4C\\u0E19\\u0E35\\u0E49\\u0E02\\u0E2D\\u0E07 Yarn 2\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"yarnPath: .yarn/releases/yarn-3.1.1.cjs\\nnodeLinker: node-modules\\nenableGlobalCache: true\\n\")), mdx(\"h2\", {\n    \"id\": \"esmrequirejs\"\n  }, \"esmRequire.js\"), mdx(\"p\", null, \"\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E44\\u0E1F\\u0E25\\u0E4C\\u0E19\\u0E35\\u0E49 \\u0E42\\u0E14\\u0E22\\u0E2D\\u0E32\\u0E08\\u0E43\\u0E2A\\u0E48\\u0E44\\u0E27\\u0E49\\u0E43\\u0E19\\u0E42\\u0E1F\\u0E25\\u0E40\\u0E14\\u0E2D\\u0E23\\u0E4C\\u0E40\\u0E14\\u0E35\\u0E22\\u0E27\\u0E01\\u0E31\\u0E1A package.json\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \" const esm = require('esm')\\n const fs = require('fs')\\n const Module = require('module')\\n \\n // Node: bypass [ERR_REQUIRE_ESM]\\n const orig = Module._extensions['.js']\\n Module._extensions['.js'] = function (module, filename) {\\n   try {\\n     return orig(module, filename)\\n   } catch (e) {\\n       const content = fs.readFileSync(filename, 'utf8')\\n       module._compile(content, filename)\\n   }\\n }\\n \\n const _esmRequire = esm(module, {\\n   cjs: true,\\n   mode: 'all',\\n })\\n \\n Module._extensions['.js'] = orig\\n \\n module.exports = function esmRequire(id) {\\n   return _esmRequire(id)\\n }\\n\")), mdx(\"h2\", {\n    \"id\": \"gatsby-configjs\"\n  }, \"gatsby-config.js\"), mdx(\"p\", null, \"\\u0E15\\u0E48\\u0E2D\\u0E44\\u0E1B\\u0E40\\u0E27\\u0E25\\u0E32\\u0E08\\u0E30\\u0E43\\u0E0A\\u0E49 Module \\u0E17\\u0E35\\u0E48 \\u0E40\\u0E1B\\u0E47\\u0E19 ESM \\u0E43\\u0E2B\\u0E49 import \\u0E41\\u0E1A\\u0E1A\\u0E19\\u0E35\\u0E49\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"const esmRequire = require('./esmRequire')\\nmodule.exports = {\\n   ....... omitted code ......\\n    plugins: [\\n        ....... omitted other plug-ins ......\\n        {\\n            resolve: `gatsby-plugin-mdx`,\\n            options: {\\n                extensions: [\\\".mdx\\\", \\\".md\\\"],\\n                remarkPlugins: [\\n                    esmRequire(\\\"remark-toc\\\").default,\\n                    esmRequire(\\\"remark-slug\\\").default,\\n                    esmRequire(\\\"remark-math\\\").default,\\n                ],\\n                rehypePlugins: [esmRequire(\\\"rehype-katex\\\").default],\\n            },\\n        },\\n        ....... omitted other plug-ins ......\\n   ]\\n   ....... omitted code ......\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#ปัญหา","title":"ปัญหา"},{"url":"#วิธีการแก้ไข้","title":"วิธีการแก้ไข้","items":[{"url":"#แก้ไข-yarnrcyml","title":"แก้ไข .yarnrc.yml"},{"url":"#esmrequirejs","title":"esmRequire.js"},{"url":"#gatsby-configjs","title":"gatsby-config.js"}]}]},"frontmatter":{"title":"การใช้ ES-Module กับ Gastby 4 และ Yarn 2","type":"blog","tag":"using-esm-with-gatsby-4","date":"อาทิตย์, 19 ธันวาคม 2021","authors":[{"id":"9b919f58-c3a4-539a-b3a0-1cc04f33e5af","name":"สุทธิศักดิ์ เด่นดวงใจ","position":["แพทย์ประจำบ้าน สาขาอาชีวเวชศาสตร์","นิสิต ปริญญาโท สาขาการวิจัยและการจัดการด้านสุขภาพ"],"avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/f4c5931835ba9cf51037771021a2c193/c4593/profile.jpg","srcSet":"/static/f4c5931835ba9cf51037771021a2c193/c4593/profile.jpg 150w,\n/static/f4c5931835ba9cf51037771021a2c193/2abbc/profile.jpg 300w","sizes":"150px"},"sources":[{"srcSet":"/static/f4c5931835ba9cf51037771021a2c193/be4eb/profile.webp 150w,\n/static/f4c5931835ba9cf51037771021a2c193/47b20/profile.webp 300w","type":"image/webp","sizes":"150px"}]},"width":150,"height":150}}}}],"excerpt":"Workaround สำหรับการใช้ ES-Module กับ Gastby 4 และ Yarn 2","background":{"publicURL":"/static/e7d44f917569701d2c6c105a1bc2aaae/gatsby.png","childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/e7d44f917569701d2c6c105a1bc2aaae/daf70/gatsby.png","srcSet":"/static/e7d44f917569701d2c6c105a1bc2aaae/ede4c/gatsby.png 750w,\n/static/e7d44f917569701d2c6c105a1bc2aaae/daf70/gatsby.png 934w","sizes":"100vw"},"sources":[{"srcSet":"/static/e7d44f917569701d2c6c105a1bc2aaae/76783/gatsby.webp 750w,\n/static/e7d44f917569701d2c6c105a1bc2aaae/a1616/gatsby.webp 934w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5074946466809422},"original":{"width":934,"height":474}}},"images":null}}},"pageContext":{"slug":"/blogs/2021/december/using-esm-with-gatsby-4/"}},
    "staticQueryHashes": ["798437112"]}